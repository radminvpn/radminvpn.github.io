$(function(){var a,e;(a=jQuery).modal||(a.extend({modal:function(i){return i.each(function(){var i=200,o=200;if(a(this).attr("href"))var e=a(this).attr("href")+(a(this).attr("href").indexOf("?")<0?"?":"&")+"ajax=y";var d=!1;if(i>a(window).width()&&(i=a(window).width()),o>a(window).height()&&(o=a(window).height()),a("body").append('<div id="modalOverlay"></div>'),a("#modalOverlay").css({width:a(window).width(),height:a(window).height(),opacity:.5,position:"fixed",left:0,top:0,"z-index":1001,dispaly:"none",background:"#000"}).show(),a("body").append('<div id="modalConteiner"></div>'),a("#modalConteiner").append('<div id="modalClose"></div>'),a("#modalConteiner").append('<div id="modalData"></div>'),a("#modalClose").css({background:"url(/img/x5.png) no-repeat",width:"30px",height:"30px","z-index":"9200",position:"absolute",top:"-2px",right:"-35px",cursor:"pointer"}),a("#modalConteiner").css({width:i,height:o,position:"fixed","z-index":1002,background:"#fff","box-shadow":"0 0 7px rgba(64,64,64,1)"}),a("#modalConteiner").css({left:a(window).width()/2-i/2,top:a(window).height()/2-o/2}),a("#modalClose").hide(),a("#loader").width(a(window).width()).height(a(window).height()).offset(a("#modalOverlay").offset()).show(),void 0!==e)a("#modalData").load(e,function(){a("#loader").hide().removeAttr("style"),0<a("#modalData").children().innerWidth()&&(i=a("#modalData").children().innerWidth()),0<parseInt(a("#modalData").children().css("max-width"))&&(i=parseInt(a("#modalData").children().css("max-width"))),a("#modalConteiner").css({width:i,left:a(window).width()/2-i/2}),o=a("#modalData").children().innerHeight()?a("#modalData").children().innerHeight():a("#modalData").height(),a("#modalConteiner").css({height:o,top:a(window).height()/2-o/2}),i>a(window).width()&&(i=a(window).width()-100),o>a(window).height()&&(o=a(window).height()-100,i+=20,a("#modalData").css({height:o,"overflow-y":"auto"})),a("#modalConteiner").css({width:i,height:o,left:a(window).width()/2-i/2,top:a(window).height()/2-o/2}),a("#modalConteiner").hide(),a("#modalConteiner").fadeIn(),a("#modalClose").show()});else{d=!0;var t=a(this),n=a(this).prev();a("#loader").hide().removeAttr("style"),i=a(this).innerWidth(),0<parseInt(a(this).css("max-width"))&&(i=parseInt(a(this).css("max-width"))),o=a(this).innerHeight(),i+80>a(window).width()&&(i=a(window).width()-100),o+80>a(window).height()&&(o=a(window).height()-100,a("#modalData").css({height:o,"overflow-y":"auto"})),a("#modalConteiner").css({width:i,height:o,left:a(window).width()/2-i/2,top:a(window).height()/2-o/2}),a("#modalConteiner").hide(),a("#modalConteiner").fadeIn(),a(this).clone(!0).appendTo("#modalData").show(),a(this).detach(),a("#modalClose").show()}a.modal.close=function(){d&&n.after(t),a("#modalData").hide().remove(),a("#modalConteiner").hide().remove(),a("#modalOverlay").hide().remove()},a.modal.resize=function(){a("#modalOverlay").css({width:a(window).width(),height:a(window).height()}),i=a("#modalData").width(),o=a("#modalData").height(),i>a(window).width()&&(i=a(window).width()-100),o>a(window).height()&&(o=a(window).height()-100,a("#modalData").css({height:o,"overflow-y":"auto"})),a("#modalConteiner").animate({width:i,height:o,left:a(window).width()/2-i/2,top:a(window).height()/2-o/2})},a(window).resize(function(){a.modal.resize()}),a("#modalClose, #modalOverlay").click(function(){a.modal.close()})})}}),a.fn.extend({modal:function(){return a.modal(a(this))}})),e=jQuery,jQuery.fn.modalImg=function(){var i=_h="200";e("body").append('<div id="modalOverlay"></div>'),e("#modalOverlay").css({width:e(window).width(),height:e(window).height(),opacity:.5,position:"fixed",left:0,top:0,"z-index":1001,dispaly:"none",background:"#000"}).show(),e("body").append('<div id="modalConteiner"></div>'),e("#modalConteiner").append('<div id="modalClose"></div>'),e("#modalConteiner").append('<div id="modalData"></div>'),e("#modalClose").css({background:"url(/img/x6.png) no-repeat",width:"30px",height:"30px","z-index":"9200",position:"absolute",top:"0",right:"-35px",cursor:"pointer"}),e("#modalClose").hover(function(){e(this).css("background-position","0 -30px")},function(){e(this).css("background-position","0 0")}),e("#modalConteiner").css({width:i,height:_h,position:"fixed","z-index":1002,background:"#fff","box-shadow":"0 0 7px rgba(64,64,64,1)"}),e("#modalConteiner").css({left:e(window).width()/2-i/2,top:e(window).height()/2-_h/2}),e("#modalClose").hide(),e("#loader").width(e(window).width()).height(e(window).height()).offset(e("#modalOverlay").offset()).show();var o=new Image;o.onload=function(){e("#loader").hide().removeAttr("style"),i=o.width,_h=o.height,e("#modalConteiner").animate({width:i,height:_h,left:e(window).width()/2-i/2,top:e(window).height()/2-_h/2}).css({background:""}),e("#modalData").append(o),e("#modalClose").show()},o.src=e(this).attr("href"),e.fn.modal.wResize=function(){e("#modalOverlay").css({width:e(window).width(),height:e(window).height()}),e("#modalConteiner").animate({left:e(window).width()/2-i/2,top:e(window).height()/2-_h/2})},e(window).resize(function(){e.fn.modal.wResize()}),e("#modalClose, #modalOverlay").click(function(){e("#modalData").hide().remove(),e("#modalConteiner").hide().remove(),e("#modalOverlay").hide().remove(),e("#loader").removeAttr("style")})}});